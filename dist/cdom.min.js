/*!
 * CDOM v0.1.1 (https://github.com/AmbroseCavalier/cdom)
 *
 * Copyright 2021 Ambrose Cavalier
 * Licensed under the MIT (https://github.com/AmbroseCavalier/cdom/blob/master/LICENSE)
 */
const nonAttributeProperties=["value","checked"],booleanAttributes=["allowfullscreen","async","autofocus","autoplay","checked","compact","controls","declare","default","defaultchecked","defaultmuted","defaultselected","defer","disabled","enabled","formnovalidate","hidden","indeterminate","inert","ismap","itemscope","loop","multiple","muted","nohref","noresize","noshade","novalidate","nowrap","open","pauseonexit","readonly","required","reversed","scoped","seamless","selected","sortable","truespeed","typemustmatch","visible"];function setAttrOrProp(e,t,n){"style"===t?e.style.cssText=(n??"").toString():booleanAttributes.includes(t.toLowerCase())?n?e.setAttribute(t,"true"):e.removeAttribute(t):nonAttributeProperties.includes(t)?e[t]=n:e.setAttribute(t,n)}function createElementFromParams(e,t,n){let r;if(r="svg"===t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e),n)for(const e in n){const t=n[e];if(e.startsWith("on")){if(null==t)continue;if("function"!=typeof t)throw new Error(`Got non-function for "${e}".`);r.addEventListener(e.substring(2).toLowerCase(),t)}else{if("function"==typeof t)throw new Error(`Got function for "${e}".`);setAttrOrProp(r,e,t??"")}}return r}let currentNode;function addNode(e){return currentNode&&currentNode.appendChild(e),e}function stringifyForInner(e){return e?.toString()??""}function handleNodeInner(e,t){if(null!==t)if("function"==typeof t){const n=currentNode;currentNode=e;try{t()}finally{currentNode=n}}else e.appendChild(document.createTextNode(stringifyForInner(t)));return e}function createAndAddElement(e,t,n,r){return handleNodeInner(addNode(createElementFromParams(t,e,n)),r)}function makeElementProxy(e){return new Proxy(Object.create(null),{get(t,n,r){if("string"!=typeof n)throw new Error("tagName must be a string");return n=n.toLowerCase(),function(t,r){if(void 0===t&&void 0===r)return createAndAddElement(e,n,null,null);if("object"==typeof t&&void 0===r)return createAndAddElement(e,n,t,null);if(void 0===r)return createAndAddElement(e,n,null,t);if("object"==typeof t)return createAndAddElement(e,n,t,r);throw new Error("Unexpected state")}}})}const CDOM={elements:makeElementProxy("xhtml"),svgElements:makeElementProxy("svg"),node:e=>addNode(e),html(e){const t=document.createElement("template");t.innerHTML=e;addNode(t.content)},text:e=>addNode(document.createTextNode(stringifyForInner(e))),replaceInner(e,t){e.textContent="",handleNodeInner(e,t)}};export default CDOM;